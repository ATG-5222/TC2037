<!DOCTYPE html> <html lang='en'> <head> <meta charset='UTF-8'> <meta http-equiv='X-UA-Compatible' content='IE=edge'> <meta name='viewport' content='width=device-width, initial-scale=1.0'> <title>Actividad 5.3 - Paralelo 2</title> <link rel='stylesheet' href='styles.css'> </head> <body><br><span class='comentario'>//Aldo Tena García</span><br><span class='comentario'>//A01275222</span><br><span class='comentario'>// g++ .\singlethread.cpp -o singlethread para compilar</span><br><br><span class='operadores'>#</span><span class='variable'>include</span> <span class='operadores'><</span><span class='variable'>iostream</span><span class='operadores'>></span><br><span class='operadores'>#</span><span class='variable'>include</span> <span class='operadores'><</span><span class='variable'>math</span><span class='variable'>h</span><span class='operadores'>></span><br><span class='operadores'>#</span><span class='variable'>include</span> <span class='operadores'><</span><span class='variable'>ctime</span><span class='operadores'>></span><br><br><span class='palabra-reservada'>using </span><span class='palabra-reservada'>namespace </span><span class='variable'>std</span><span class='operadores'>;</span><br><br><span class='comentario'>//Función para verificar si el número es primo</span><br><span class='palabra-reservada'>bool </span><span class='variable'>verificar_primo</span><span class='operadores'>(</span><span class='palabra-reservada'>int </span><span class='variable'>num</span><span class='operadores'>)</span> <span class='operadores'>{</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='comentario'>//Si el número es menor a 2 devuelve falso, ya que no es un número primo</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>if </span><span class='operadores'>(</span><span class='variable'>num</span> <span class='operadores'><</span> <span class='numero'>2</span><span class='operadores'>)</span> <span class='operadores'>{</span> <br>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>return </span><span class='palabra-reservada'>false;</span> <br>&nbsp;&nbsp;&nbsp;&nbsp<span class='operadores'>}</span><br>    <span class='comentario'>//Si el número es dos o más, revisara si es primo</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>else </span><span class='operadores'>{</span><br>    <span class='comentario'>//Ciclo desde 2 hasta el cuadrado del numero</span><br>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>for </span><span class='operadores'>(</span><span class='palabra-reservada'>int </span><span class='variable'>i</span> <span class='operadores'>=</span> <span class='numero'>2</span><span class='operadores'>;</span> <span class='variable'>i</span> <span class='operadores'><</span><span class='operadores'>=</span> <span class='variable'>sqrt</span><span class='operadores'>(</span><span class='variable'>num</span><span class='operadores'>)</span><span class='operadores'>;</span> <span class='variable'>i</span><span class='operadores'>+</span><span class='operadores'>+</span><span class='operadores'>)</span><span class='operadores'>{</span> <br>      <span class='comentario'>//Si el numero es divisible de manera exacta entre j, no es primo, así que devuelve falso</span><br>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>if </span><span class='operadores'>(</span><span class='variable'>num</span><span class='operadores'>%</span><span class='variable'>i</span> <span class='operadores'>=</span><span class='operadores'>=</span> <span class='numero'>0</span><span class='operadores'>)</span> <span class='operadores'>{</span><br>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>return </span><span class='palabra-reservada'>false;</span> <br>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class='operadores'>}</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class='operadores'>}</span> <br>    <span class='comentario'>//Termina el ciclo, así que el número es primo y devuelve verdadero</span><br>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>return </span><span class='palabra-reservada'>true;</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='operadores'>}</span><br><span class='operadores'>}</span><br><br><span class='palabra-reservada'>int </span><span class='variable'>main</span><span class='operadores'>(</span><span class='palabra-reservada'>int </span><span class='variable'>argc</span><span class='operadores'>,</span> <span class='palabra-reservada'>char*</span> <span class='variable'>argv</span><span class='operadores'>[</span><span class='operadores'>]</span><span class='operadores'>)</span> <span class='operadores'>{</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='comentario'>//Variable para guardar la suma de los números primos y los tiempos de ejecucion</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>long </span><span class='palabra-reservada'>long </span><span class='variable'>suma</span> <span class='operadores'>=</span> <span class='numero'>0</span><span class='operadores'>;</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>unsigned </span><span class='variable'>t0</span><span class='operadores'>,</span> <span class='variable'>t1</span><span class='operadores'>;</span> <br>&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>int </span><span class='variable'>contador</span> <span class='operadores'>=</span> <span class='numero'>0</span><span class='operadores'>;</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='variable'>cout</span> <span class='operadores'><</span><span class='operadores'><</span> <span class='string'>"Actividad 5.2: Programacion paralela y concurrente." <<endl</span><span class='operadores'>;</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='variable'>cout</span> <span class='operadores'><</span><span class='operadores'><</span> <span class='string'>"Version secuencial" <<endl</span><span class='operadores'>;</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='variable'>cout</span> <span class='operadores'><</span><span class='operadores'><</span> <span class='string'>"Suma de numeros primos menores a 5,000,000\n" << endl</span><span class='operadores'>;</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='comentario'>//Guarda el tiempo en que se inicio el programa</span><br>    <span class='variable'>t0</span> <span class='operadores'>=</span> <span class='variable'>clock</span><span class='operadores'>(</span><span class='operadores'>)</span><span class='operadores'>;</span><br><br>    <span class='comentario'>//ciclo para recorrer todos los número menores a 5000000</span><br>    <span class='palabra-reservada'>for(</span><span class='palabra-reservada'>long </span><span class='palabra-reservada'>long </span><span class='variable'>i</span> <span class='operadores'>=</span> <span class='numero'>0</span><span class='operadores'>;</span> <span class='variable'>i</span> <span class='operadores'><</span> <span class='numero'>500</span><span class='numero'>00</span><span class='numero'>0</span><span class='operadores'>;</span> <span class='variable'>i</span><span class='operadores'>+</span><span class='operadores'>+</span><span class='operadores'>)</span> <span class='operadores'>{</span><br>        <span class='comentario'>//Verifica si el número es primo en la función, si lo es, se va sumando a la variable "suma"</span><br>        <span class='palabra-reservada'>if </span><span class='operadores'>(</span><span class='variable'>verificar_primo</span><span class='operadores'>(</span><span class='variable'>i</span><span class='operadores'>)</span><span class='operadores'>)</span> <span class='operadores'>{</span><br>            <span class='variable'>suma</span> <span class='operadores'>+</span><span class='operadores'>=</span> <span class='variable'>i</span><span class='operadores'>;</span><br>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class='variable'>contador</span> <span class='operadores'>+</span><span class='operadores'>=</span> <span class='numero'>1</span><span class='operadores'>;</span><br>        <span class='operadores'>}</span><br>    <span class='operadores'>}</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='comentario'>//Guarda el tiempo en que se acabó el programa</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='variable'>t1</span> <span class='operadores'>=</span> <span class='variable'>clock</span><span class='operadores'>(</span><span class='operadores'>)</span><span class='operadores'>;</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='comentario'>//Imprime el resultado de la suma total</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='variable'>cout</span> <span class='operadores'><</span><span class='operadores'><</span> <span class='variable'>suma</span> <span class='operadores'><</span><span class='operadores'><</span> <span class='variable'>endl</span><span class='operadores'>;</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='variable'>cout</span> <span class='operadores'><</span><span class='operadores'><</span> <span class='variable'>contador</span> <span class='operadores'><</span><span class='operadores'><</span> <span class='string'>" numeros primos sumados." << endl</span><span class='operadores'>;</span><br><br>    <span class='comentario'>//Calcula el tiempo de ejecución del programa</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>double </span><span class='variable'>time</span> <span class='operadores'>=</span> <span class='operadores'>(</span><span class='palabra-reservada'>double(</span><span class='variable'>t1</span> <span class='operadores'>-</span> <span class='variable'>t0</span><span class='operadores'>)</span><span class='operadores'>/</span><span class='variable'>CLOCKS_PER_SEC</span><span class='operadores'>)</span><span class='operadores'>;</span><br><br>    <span class='comentario'>//Imprime el tiempo de ejecución</span><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='variable'>cout</span> <span class='operadores'><</span><span class='operadores'><</span> <span class='string'>"Tiempo de ejecucion: " << time << " s"</span><span class='operadores'>;</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp<span class='palabra-reservada'>return </span><span class='numero'>0</span><span class='operadores'>;</span><br><span class='operadores'>}</span><br>